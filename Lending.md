## 概述

该借贷协议在完成新代币的募资并建立 CETUS 流动性池后，为用户提供存款与借贷服务。用户可存入 SUI 或新代币以获取利息，或以这些资产为抵押，从借贷池中借出相应资产。本协议特别考虑到新代币可能在短时间内出现多倍的价格上涨，为此在参数设计和清算机制上进行了风险加强。

### 协议特点

1. **多资产支持**：可同时支持 SUI 及多个新发行的代币作为抵押和借贷标的。
2. **链上价格参考**：价格以 CETUS 流动性池中 SUI 与代币的比例为基础，无需外部数据源。
3. **严格风险控制**：针对新代币高波动特点，采用较低抵押率、较高清算惩罚和更严格的健康因子计算方式。
4. **收益分配**：初始流动性 10% 部分产生的利息收益将公平分配给存款者，激励用户为借贷池提供流动性。
5. **参数固定**：所有关键参数（抵押率、清算阈值、利率曲线、清算奖励比例等）在合约部署时设定，不会随意更改，让用户有稳定预期。

---

## 价格与价值计算

### 价格来源

每种新代币与 SUI 的 CETUS 池中记录了以下数量：

- \(X_i\)：该代币 \(i\) 对应的 SUI 数量
- \(Y_i\)：该代币 \(i\) 对应的代币数量

代币 \(i\) 的价格近似为：
\[
\text{价格}\_i = \frac{X_i}{Y_i} \quad (\text{SUI/Token})
\]

该价格无需预言机，所有计算直接基于链上 CETUS 池数据。

### 抵押物与借款价值

当用户提供多种抵押物（SUI 与若干新代币），所有抵押物与借款都统一转换为 SUI 计价进行风险评估。

---

## 抵押、借款与限制

用户可抵押 SUI 或新代币以借出 SUI 或新代币。然而，为控制新代币价格暴涨可能带来的过度借贷风险，本协议为不同资产设置不同的抵押率（LTV）和清算阈值：

- **SUI 抵押率 (LTV_SUI)**：由于 SUI 较为稳定，LTV 可适中（如 50%-60%）。
- **新代币抵押率 (LTV_token)**：新代币价格波动剧烈，为防范价格骤变导致的高风险，初始阶段对新代币的抵押率设定极低（如 10%-20%）。这意味着即使新代币价格在短期内猛涨，借款人也无法在低位大量抵押后，高倍借出其它资产而不面临清算风险。

**最大可借款价值**（以 SUI 计）：  
\[
V*{borrow}^{max} = \sum_j (V*{C*j} \times LTV*{C*j})
\]
其中 \(V*{C*j}\) 为第 \(j\) 种抵押资产（SUI 或新代币）以 SUI 计价的价值，\(LTV*{C_j}\) 为该资产对应的 LTV。

---

## 多代币健康因子 (HF) 计算

为了考虑多资产抵押和借款的风险水平，引入健康因子 (Health Factor, HF)。HF 综合考虑用户的所有抵押品和借款，判断是否可被清算。

- 定义抵押物集合 \(\{C*j\}\)，每种抵押物都有一个清算阈值 \(T*{C_j}\)（如 SUI 可为 85%，新代币为 70%-75% 或更低），以反映其风险程度。波动越大，清算阈值越低。
- 定义借款集合 \(\{B*k\}\)，将所有借款折算为 SUI 价值 \(V*{B*k}\)。总借款价值为：
  \[
  V*{borrow}^{total} = \sum*k V*{B_k}
  \]

**健康因子计算**：
\[
HF = \frac{\sum*j (V*{C*j} \times T*{C*j})}{V*{borrow}^{total}}
\]

当 \(HF < 1\) 时，用户的抵押物（按清算阈值计）不足以覆盖所借资产，清算人可对其头寸进行清算。

此设计通过为新代币设定更低的 \(T\_{C_j}\)（如 70% 或更低）和更低的 LTV，增加对价格骤变的防范余量。

---

## 清算机制与激励

当 \(HF < 1\) 时，触发清算流程：

1. **清算操作**：  
   清算人可偿还用户部分借款，以降低用户的借贷比率，并从中获得对抵押物的份额作为补偿和奖励。

2. **清算奖励 (Liquidation Bonus)**：  
   为鼓励清算，清算人可获得一定比例的奖励（如 5%-10%）。在高波动代币场景下，建议适当提高清算奖励（如 10%），以确保在价格快速变动时依然有足够动力执行清算。

3. **清算后的结果**：  
   借款人的抵押物将部分被扣除以偿还债务和支付清算奖励，清算人则获得对应抵押物或相应价值的 SUI。

严格的清算参数与较高的清算奖励确保在代币暴涨期间即使有人高杠杆操作，也会面对随时被清算的风险，减少坏账可能。

---

## 利率模型

利率根据单个资产池的利用率 \(U\) 自动调整：

\[
U = \frac{\text{已借出该资产的总价值}}{\text{该资产池的总价值}}
\]

分段设定利率曲线（合约中固化）：

- \(U \le U*{low}\)：低利率 \(r*{low}\)，鼓励借贷
- \(U*{low} < U < U*{high}\)：利率在 \(r*{low}\) 与 \(r*{mid}\) 之间线性上升
- \(U \ge U*{high}\)：利率接近 \(r*{high}\)，鼓励还款降低利用率

这种设计在资金短缺时快速推高利率，避免超额借贷和资金池枯竭。

---

## 存款与利息分配

1. **存款功能**：  
   用户可将 SUI 或新代币存入借贷池，对应的资产池中新增的可借贷份额会提升池子流动性。存款者获得存款凭证，凭证代表其在该池的比例份额。

2. **利息分配**：  
   借款人支付的利息将按存款份额比例分配给存款者。此外，初始 10% 流动性产生的利息收益也将根据份额分配给对应存款用户。这样，无论用户存入的是 SUI 还是新代币，都能根据其池中占比获得相应的利息回报。

---

<!-- ## 使用示例

1. **抵押与借款示例**：
   用户 A 抵押 100 SUI (清算阈值 85%) 和价值 100 SUI 的新代币 (清算阈值 70%)。
   整体清算参考价值：
   \[
   100 \times 0.85 + 100 \times 0.70 = 85 + 70 = 155 \text{ SUI}
   \]

   若 A 想借出 70 SUI 价值的代币或 SUI，则：
   \[
   HF = \frac{155}{70} \approx 2.21 > 1
   \]
   非常安全。

   若代币价格暴涨，增加抵押价值，A 不能无限度借出更多资产，因为代币 LTV 很低，即使价格翻倍，也无法轻易突破预先设定的严格上限。

2. **清算示例**：
   假设价格变化后导致 A 的 HF 降至 0.9，清算人可偿还 A 一定数量的借款并从中获得 A 抵押物的部分份额外加 10% 清算奖励。此举确保即使新代币暴涨暴跌，也有足够的人愿意参与清算，使借贷池免遭损失。

---

## 参数设定建议

- **LTV 与清算阈值**：
  - SUI：LTV = 50%-60%，清算阈值 = 85%
  - 新代币：LTV = 10%-20%，清算阈值 = 70%-75%
- **清算奖励**：
  为强化风险控制，新代币清算奖励可略高于传统资产(如 SUI)，例如统一定为 10%。

- **利率曲线**：
  根据实际市场情况预设静态值，无需后期修改。例如：
  - \(U*{low} = 30%\), \(U*{high} = 80%\)
  - \(r*{low} = 5%\), \(r*{mid} = 15%\), \(r\_{high} = 50%\)

上述参数为范例，实际数值可在合约部署时根据发行方策略确定。

---

## 总结

该方案在考虑多代币抵押和价格高度波动的情况下，通过更严格的 LTV 和清算阈值、较高的清算奖励、以及基于 CETUS 池实时价格的健康因子计算，确保了在无外部预言机的情况下依然能实现稳健的借贷服务。用户可安全地存入资产赚取利息或抵押后借出资产，而开发者则能以此为基础进一步构建稳定、高效的去中心化金融生态。 -->
